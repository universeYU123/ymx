{% extends 'base.html' %}

{% block  title%}
评分情况分析
{% endblock %}

{% block sidebar%}
<aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">
        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'home' %}">
                <i class="bi bi-grid"></i>
                <span>首页</span>
            </a>
        </li>
        <li class="nav-heading">个人信息</li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'changeSelfInfo' %}">
                <i class="bi bi-menu-button-wide"></i><span>个人信息</span></i>
            </a>
        </li><!-- End Components Nav -->

        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'changePassword' %}">
                <i class="bi bi-journal-text"></i><span>修改密码</span>
            </a>
        </li>
        <li class="nav-heading">数据表格</li>

        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'tableData' %}">
                <i class="bi bi-layout-text-window-reverse"></i><span>数据操作</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'tableData2' %}">
                <i class="bi bi-layout-text-window-reverse"></i><span>用户数据</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'comment' %}">
                <i class="bi bi-layout-text-window-reverse"></i><span>评论数据</span>
            </a>
        </li>
        <li class="nav-heading">数据可视化</li>

        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'cityChar' %}">
                <i class="bi bi-bar-chart"></i><span>BMI和性别分析</span></i>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link" href="{% url 'rateChar' %}">
                <i class="bi bi-gem"></i><span>压力水平对比</span>
            </a>
        </li><!-- End Icons Nav -->

        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'priceChar' %}">
                <i class="bi bi-person"></i>
                <span>步数和睡眠时长分析</span>
            </a>
        </li>

        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'commentsChar' %}">
                <i class="bi bi-question-circle"></i>
                <span>评论分析</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'heartChar' %}">
                <i class="bi bi-question-circle"></i>
                <span>心率分布</span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="{% url 'bloodChar' %}">
                <i class="bi bi-question-circle"></i>
                <span>血压分析</span>
            </a>
        </li>
        <li class="nav-heading">后台管理</li>
        <li class="nav-item">
            <a class="nav-link collapsed" href="http://127.0.0.1:8000/admin/">
                <i class="bi bi-envelope"></i>
                <span>后台数据管理</span>
            </a>
        </li>
    </ul>

</aside>

{% endblock %}


{% block content %}
<div class="pagetitle" style="display: flex;align-items: center">
    <div style="margin-right: auto">
        <h1>不同睡眠障碍 压力水平对比图</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'home' %}">数据可视化</a></li>
                <li class="breadcrumb-item active">不同睡眠障碍 压力水平对比图</li>
            </ol>
        </nav>
    </div>
    <h5 style="font-weight: normal">
        {{ nowTime.year }} - {{ nowTime.mon }} - {{ nowTime.day }}
    </h5>
</div>


<section class="section dashboard">
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title"><span>类型选择</span></h5>
                    <form action="{% url 'rateChar' %}" method="post">
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label">压力水平</label>
                            <div class="col-sm-10">
                                <select class="form-select" name="category" aria-label="0">
                                    <option>年龄</option>
                                    <option>睡眠时长</option>
                                    <option>睡眠质量</option>
                                    <option>身体活动水平</option>
                                    <option>压力水平</option>
                                    <option>心率</option>
                                    <option>每日步数</option>
                                </select>
                                <button style="margin-top:20px" class="btn btn-primary">提交</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-6">

            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">不同睡眠障碍 压力水平对比图</h5>
                    <div id="mains" style="width:100%;height: 450px"></div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block echarts%}
<script>
    var chartDom = document.getElementById('mains');
        var myChart = echarts.init(chartDom);
        var option;

        option = {
          tooltip: {
            trigger: 'axis'
          },
          legend: {
            data: ['压力水平']
          },
          toolbox: {
            show: true,
            feature: {
              dataView: { show: true, readOnly: false },
              magicType: { show: true, type: ['line', 'bar'] },
              restore: { show: true },
              saveAsImage: { show: true }
            }
          },
          calculable: true,
          xAxis: [
            {
              type: 'category',
              // prettier-ignore
              data:{{ charOneData.Xdata | safe }}
            }
          ],
          yAxis: [
            {
              type: 'value'
            }
          ],
          dataZoom: [
            {
              show: true,
              start: 0,
              end: 200
            }
          ],
          series: [
            {
              name: '压力水平',
              type: 'bar',
              data: {{ charOneData.Ydata }},
              markPoint: {
                data: [
                  { type: 'max', name: 'Max' },
                  { type: 'min', name: 'Min' }
                ],
                 itemStyle:{
              color:'#a90000'
                 }
              },
              markLine: {
                data: [{ type: 'average', name: 'Avg' },]

              }
            }
          ]
        };

        option && myChart.setOption(option);
</script>

{% endblock %}